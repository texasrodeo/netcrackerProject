<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>

    <meta charset="UTF-8">
    <title>Список аккаунтов</title>
</head>
<body>
<h1 th:text="  ${header}" >
</h1>
<!--<p th:if = "${message}" th:text="${message}"></p>-->
<span th:text="${message}"></span>
<p th:if = "${addedToCart}" th:text="${addedToCart}"></p>

<form th:action="@{/gamestore}" method="get">
    <h3>Фильтр</h3>
    <input type="hidden" name="id" th:value="${storeId}">
    <div>

        <label> Цена от : <input type="text" name="from"/> </label>
        <label> до : <input type="text" name="to"/> </label>
    </div>
    <label>
        <select name = "sort">
            <option value="desc">По убыванию цены</option>
            <option value="inc">По возрастанию цены</option>
<!--                <option th:value="${game.getId().toString()}" th:text="${game.getName()}" > </option>-->
        </select>
    </label>

    <div><input type="submit" value="Показать"/></div>
</form>

<br>

<table>
    <tr>
        <td>
            Описание
        </td>
        <td>
            Цена
        </td>
    </tr>
    <th:block th:each="account : ${accounts}">
        <tr>
            <td>
                <a th:href="@{gamestore/account(id=${account.getId()})}" th:text="${account.getDescription()}">  </a>
            </td>
            <td>
                <span th:text="${account.getPrice()}"> </span>
            </td>
            <th:block th:if="${account.getStatus().equals('RESERVED')}">
                <td>Данный аккаунт уже зарезервирован</td>
            </th:block>
        </tr>
    </th:block>
</table>

<div sec:authorize="hasRole('ROLE_ADMIN')">

    <h4><a href="/admin/addaccount">Добавить аккаунт</a></h4>
</div>

<br>
<a href="/main">На главную</a>

</body>
</html>